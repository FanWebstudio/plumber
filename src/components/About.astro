---
import { Image } from "astro:assets";

interface Feature {
    title: string;
    icon: string;
}

interface ImageAsset {
    src: string;
    alt: string;
    width: number;
    height: number;
}

const features: Feature[] = [
    { title: "Experienced Plumbers", icon: "fas fa-check" },
    { title: "Competitive Pricing", icon: "fas fa-check" },
    { title: "Eco-Friendly Options", icon: "fas fa-check" },
    { title: "24/7 Emergency Service", icon: "fas fa-check" },
    { title: "Customer Satisfaction Guarantee", icon: "fas fa-check" },
    { title: "Transparent Communication", icon: "fas fa-check" },
];

const mainImage: ImageAsset = {
    src: "https://i.imgur.com/5FyHXE2.png",
    alt: "Professional plumber working on pipes, showcasing our expertise and attention to detail",
    width: 494,
    height: 584
};

const qualityBadge: ImageAsset = {
    src: "https://i.imgur.com/nZVvqvE.png",
    alt: "Quality assurance badge",
    width: 250,
    height: 256
};
---

<section 
    class="w-full py-16 sm:py-20 lg:py-[120px] bg-white" 
    aria-labelledby="about-title"
>
    <div class="w-full max-w-[1296px] mx-auto px-4 sm:px-6 lg:px-8">
        <div
            class="flex flex-col lg:flex-row gap-12 lg:gap-[152px] items-center"
        >
            <!-- Left content -->
            <article 
                class="w-full lg:w-[549px] flex flex-col gap-12 lg:gap-20 animate-fadeIn"
            >
                <!-- Text content -->
                <header class="flex flex-col gap-4 sm:gap-6">
                    <h2
                        id="about-title"
                        class="text-[28px] sm:text-[32px] lg:text-[48px] text-dark font-satoshi font-bold leading-[1.125]"
                    >
                        We Focus on Customer Satisfaction and Quality
                    </h2>
                    <p class="text-[#495460] text-sm sm:text-base font-normal leading-6 max-w-[90%] sm:max-w-none">
                        Use and re-use tons of responsive sections too a main
                        create the perfect layout. Sections are firmly of
                        organised into the perfect starting categories.
                    </p>
                </header>

                <!-- Features list -->
                <div class="flex flex-col gap-6 sm:gap-[30px]">
                    <h3
                        id="features-title"
                        class="text-dark text-lg sm:text-xl font-semibold leading-7"
                    >
                        A snapshot of Plumby's features:
                    </h3>
                    <div
                        class="grid grid-cols-1 sm:grid-cols-2 gap-x-6 sm:gap-x-[72px] gap-y-4 sm:gap-y-[15px]"
                        role="list"
                        aria-labelledby="features-title"
                    >
                        {/* Features grid */}
                        {[0, 1].map((columnIndex) => (
                            <ul class="flex flex-col gap-4 sm:gap-[15px] list-none">
                                {features.slice(columnIndex * 3, (columnIndex + 1) * 3).map((feature) => (
                                    <li 
                                        class="flex items-center gap-2 transition-transform hover:translate-x-1 focus-within:translate-x-1"
                                    >
                                        <span
                                            class="w-[18px] h-[18px] sm:w-[22px] sm:h-[22px] flex items-center justify-center"
                                            aria-hidden="true"
                                        >
                                            <i
                                                class={`${feature.icon} text-primary text-sm sm:text-base`}
                                            />
                                        </span>
                                        <span 
                                            class="text-dark text-sm sm:text-base font-medium leading-6 focus:outline-none focus-visible:ring-2 focus-visible:ring-primary focus-visible:ring-offset-2 rounded"
                                            tabindex="0"
                                        >
                                            {feature.title}
                                        </span>
                                    </li>
                                ))}
                            </ul>
                        ))}
                    </div>
                </div>
            </article>

            <!-- Right image and badge -->
            <figure 
                class="w-full max-w-[400px] sm:max-w-[494px] lg:w-[494px] relative lg:ml-auto animate-fadeIn animation-delay-300"
            >
                <!-- Main image -->
                <div
                    class="w-full aspect-[494/584] bg-gray-200 rounded-lg overflow-hidden"
                >
                    <img
                        src={mainImage.src}
                        alt={mainImage.alt}
                        width={mainImage.width}
                        height={mainImage.height}
                        loading="lazy"
                        decoding="async"
                        class="w-full h-full object-cover transition-transform duration-700 hover:scale-105"
                    />
                </div>

                <!-- Quality badge -->
                <div
                    class="absolute left-[50%] bottom-[-90px] translate-x-[-50%] sm:left-[-60px] sm:bottom-auto sm:top-[50%] sm:translate-x-0 lg:left-[-90px] sm:translate-y-[-50%] w-[180px] h-[185px] sm:w-[220px] sm:h-[226px] lg:w-[250px] lg:h-[256px] transform sm:-rotate-30 animate-float"
                    aria-hidden="true"
                >
                    <img
                        src={qualityBadge.src}
                        alt=""
                        width={qualityBadge.width}
                        height={qualityBadge.height}
                        loading="lazy"
                        decoding="async"
                        class="w-full h-full object-contain"
                        aria-hidden="true"
                    />
                </div>
                <figcaption class="sr-only">
                    Quality badge showcasing our commitment to excellence
                </figcaption>
            </figure>
        </div>
    </div>
</section>

<style>
    @keyframes float {
        0%, 100% {
            transform: translateY(0) rotate(-30deg);
        }
        50% {
            transform: translateY(-10px) rotate(-30deg);
        }
    }

    @keyframes fadeIn {
        from {
            opacity: 0;
            transform: translateY(20px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    .animate-float {
        animation: float 6s ease-in-out infinite;
    }

    .animate-fadeIn {
        animation: fadeIn 0.8s ease-out forwards;
    }

    .animation-delay-300 {
        animation-delay: 300ms;
    }
</style>
