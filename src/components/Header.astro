---
import "@fontsource/inter/400.css";
import "@fontsource/inter/500.css";
import "@fontsource/inter/600.css";
import "@fortawesome/fontawesome-free/css/all.min.css";

interface NavItem {
    href: string;
    text: string;
    isCurrent?: boolean;
}

interface SocialLink {
    href: string;
    icon: string;
    label: string;
}

const navItems: NavItem[] = [
    { href: "/", text: "Home", isCurrent: true },
    { href: "/about", text: "About" },
    { href: "/service", text: "Service" },
    { href: "/blog", text: "Blog" },
    { href: "/contact", text: "Contact" }
];

const socialLinks: SocialLink[] = [
    { href: "#", icon: "far fa-envelope", label: "Send us an email" },
    { href: "#", icon: "fab fa-facebook-f", label: "Visit our Facebook page" },
    { href: "#", icon: "fab fa-instagram", label: "Follow us on Instagram" },
    { href: "#", icon: "fab fa-twitter", label: "Follow us on Twitter" }
];

const phoneNumber = "+1 071 281 9795";
---

<header class="relative" role="banner">
    <!-- Top bar -->
    <div class="w-full py-3 flex justify-center bg-white">
        <div
            class="w-full max-w-[1295.81px] px-4 flex flex-col sm:flex-row justify-between items-center gap-2 sm:gap-0"
        >
            <!-- Phone number -->
            <address class="hidden sm:block not-italic">
                <a
                    href={`tel:${phoneNumber.replace(/\s+/g, '')}`}
                    class="text-dark text-sm font-semibold leading-[22px] no-underline hover:no-underline flex items-center gap-2"
                    aria-label={`Call us at ${phoneNumber}`}
                >
                    <span class="w-4 h-4 flex items-center justify-center" aria-hidden="true">
                        <i class="fas fa-phone-alt text-primary"></i>
                    </span>
                    <span>{phoneNumber}</span>
                </a>
            </address>

            <!-- Social Media Links -->
            <nav
                class="hidden sm:flex items-center gap-6"
                aria-label="Social Media Links"
            >
                {socialLinks.map(({ href, icon, label }) => (
                    <a
                        href={href}
                        class="text-dark hover:text-primary transition-colors"
                        aria-label={label}
                    >
                        <i class={`${icon} text-sm`} aria-hidden="true"></i>
                    </a>
                ))}
            </nav>
        </div>
    </div>
    <hr class="hidden sm:block w-full h-px bg-divider border-0" role="separator" aria-hidden="true" />

    <!-- Main header -->
    <div class="w-full flex justify-center py-4">
        <div class="w-full max-w-[1296px] px-4">
            <div class="flex flex-row justify-between items-center">
                <a href="/" class="flex items-center gap-3" aria-label="Plumby - Home">
                    <span
                        class="flex items-center text-[38px] text-primary"
                        aria-hidden="true"
                    >
                        <i class="fas fa-faucet"></i>
                    </span>
                    <span
                        class="text-dark font-satoshi text-[30.52px] font-bold leading-[34.34px]"
                        >plumby</span
                    >
                </a>

                <!-- Mobile menu button -->
                <button
                    type="button"
                    class="md:hidden text-dark hover:text-primary transition-colors"
                    aria-label="Toggle navigation menu"
                    aria-expanded="false"
                    aria-controls="mobile-menu"
                    onclick="document.getElementById('mobile-menu').classList.toggle('hidden')"
                >
                    <i class="fas fa-bars text-2xl" aria-hidden="true"></i>
                </button>

                <!-- Desktop navigation -->
                <nav
                    class="hidden md:flex items-center gap-10"
                    aria-label="Main Navigation"
                >
                    <ul class="flex gap-10 list-none" role="list">
                        {navItems.map(({ href, text, isCurrent }) => (
                            <li>
                                <a
                                    href={href}
                                    class={`text-${isCurrent ? 'primary' : 'dark'} text-base font-medium leading-6 ${!isCurrent ? 'hover:text-primary transition-colors' : ''}`}
                                    aria-current={isCurrent ? "page" : undefined}
                                >{text}</a>
                            </li>
                        ))}
                    </ul>
                    <button
                        type="button"
                        onclick="window.location.href='/request-call'"
                        class="bg-primary text-white text-base font-semibold leading-6 px-[18px] py-3 rounded-lg hover:bg-primary/90 transition-colors whitespace-nowrap"
                        aria-label="Request a free call"
                    >
                        Request A Free Call
                    </button>
                </nav>
            </div>

            <!-- Mobile navigation -->
            <nav
                id="mobile-menu"
                class="hidden w-full md:hidden pt-4"
                aria-label="Mobile Navigation"
            >
                <ul class="flex flex-col gap-4 list-none" role="list">
                    {navItems.map(({ href, text, isCurrent }) => (
                        <li>
                            <a
                                href={href}
                                class={`text-${isCurrent ? 'primary' : 'dark'} text-base font-medium leading-6 ${!isCurrent ? 'hover:text-primary transition-colors' : ''}`}
                                aria-current={isCurrent ? "page" : undefined}
                            >{text}</a>
                        </li>
                    ))}
                    <li class="pt-2">
                        <button
                            type="button"
                            onclick="window.location.href='/request-call'"
                            class="w-full bg-primary text-white text-base font-semibold leading-6 px-[18px] py-3 rounded-lg hover:bg-primary/90 transition-colors"
                            aria-label="Request a free call"
                        >
                            Request A Free Call
                        </button>
                    </li>
                    <li class="pt-4 border-t border-divider">
                        <!-- Phone number -->
                        <div class="flex flex-col items-center gap-4">
                            <address class="not-italic">
                                <a
                                    href={`tel:${phoneNumber.replace(/\s+/g, '')}`}
                                    class="text-dark text-sm font-semibold leading-[22px] no-underline hover:no-underline flex items-center gap-2"
                                    aria-label={`Call us at ${phoneNumber}`}
                                >
                                    <span class="w-4 h-4 flex items-center justify-center" aria-hidden="true">
                                        <i class="fas fa-phone-alt text-primary"></i>
                                    </span>
                                    <span>{phoneNumber}</span>
                                </a>
                            </address>

                            <!-- Social Media Links -->
                            <nav
                                class="flex items-center justify-center gap-6"
                                aria-label="Social Media Links"
                            >
                                {socialLinks.map(({ href, icon, label }) => (
                                    <a
                                        href={href}
                                        class="text-dark hover:text-primary transition-colors"
                                        aria-label={label}
                                    >
                                        <i class={`${icon} text-sm`} aria-hidden="true"></i>
                                    </a>
                                ))}
                            </nav>
                        </div>
                    </li>
                </ul>
            </nav>
        </div>
    </div>
</header>

<script>
    const mobileMenuButton = document.querySelector('button[aria-controls="mobile-menu"]');
    const mobileMenu = document.getElementById('mobile-menu');

    if (mobileMenuButton && mobileMenu) {
        mobileMenuButton.addEventListener('click', () => {
            const isExpanded = mobileMenuButton.getAttribute('aria-expanded') === 'true';
            mobileMenuButton.setAttribute('aria-expanded', (!isExpanded).toString());
            mobileMenu.classList.toggle('hidden');
            
            // Toggle icon between bars and times
            const icon = mobileMenuButton.querySelector('i');
            if (icon) {
                icon.classList.toggle('fa-bars');
                icon.classList.toggle('fa-times');
            }
        });
    }
</script>
